 and decoding may require significant cpu processing. . multimedia tasks must be scheduled with certain priorities to ensure meeting the deadline requirements of continuous media. . similarly file systems must be efficient to meet the rate requirements of continuous media. . network protocols must support bandwidth requirements while minimizing delay and jitter. in later sections we explore these and several other issues related to qos. first however we provide an overview of various techniques for compressing multimedia data. as suggested above compression makes significant demands on the cpu. . compression because of the size and rate requirements of multimedia systems multimedia files are often compressed from their original form to a much smaller form. once a file has been compressed it takes up less space for storage and can be delivered to a client more quickly. compression is particularly important when the content is being streamed across a network connection. in discussing file compression we often refer to the compression ratio which is the ratio of the original file size to the size of the compressed file. for example an kb file that is compressed to kb has a compression ratio of . once a file has been compressed encoded it must be decompressed decoded before it can be accessed. a feature of the algorithm used to compress the file affects the later decompression. compression algorithms are classified as either lossy or lossless. with lossy compression some of the original data are lost when the file is decoded whereas lossless compression ensures that the compressed file can always be restored back to its original form. in general lossy techniques provide much higher compression ratios. obviously though . compression only certain types of data can tolerate lossy compression namely images audio and video. lossy compression algorithms often work by eliminating certain data such as very high or low frequencies that a human ear cannot detect. some lossy compression algorithms used on video operate by storing only the differences between successive frames. lossless algorithms are used for compressing text files such as computer programs for example zipping files because we want to restore these compressed files to their original state. a number of different lossy compression schemes for continuous media data are commercially available. in this section we cover one used by the moving picture experts group better known as mpeg. mpeg refers to a set of file formats and compression standards for digital video. because digital video often contains an audio portion as well each of the standards is divided into three layers. layers and apply to the audio and video portions of the media file. layer is known as the systems layer and contains timing information to allow the mpeg player to multiplex the audio and video portions so that they are synchronized during playback. there are three major mpeg standards mpeg mpeg and mpeg . mpeg is used for digital video and its associated audio stream. the resolution of mpeg is x at frames per second with a bit rate of up to . mbps. this provides a quality slightly lower than that of conventional vcr videos. mp audio files a popular medium for storing music use the audio layer layer of mpeg . for video mpeg can achieve a compression ratio of up to although in practice compression ratios are much lower. because mpeg does not require high data rates it is often used to download short video clips over the internet. mpeg provides better quality than mpeg and is used for compressing dvd movies and digital television including high definition television or hdtv . mpeg identifies a number of levels and profiles of video compression. the level refers to the resolution of the video the profile characterizes the video's quality. in general the higher the level of resolution and the better the quality of the video the higher the required data rate. typical bit rates for mpeg encoded files are . mbps to mbps. because mpeg requires higher rates it is often unsuitable for delivery of video across a network and is generally used for local playback. mpeg is the most recent of the standards and is used to transmit audio video and graphics including two dimensional and three dimensional animation layers. animation makes it possible for end users to interact with the file during playback. for example a potential home buyer can download an mpeg file and take a virtual tour through a home she is considering purchasing moving from room to room as she chooses. another appealing feature of mpeg is that it provides a scalable level of quality allowing delivery over relatively slow network connections such as kbps modems or over high speed local area networks with rates of several megabits per second. furthermore by providing a scalable level of quality mpeg audio and video files can be delivered to wireless devices including handheld computers pdas and cell phones. all three mpeg standards discussed here perform lossy compression to achieve high compression ratios. the fundamental idea behind mpeg compression is to store the differences between successive frames. we do not cover further details of how mpeg performs compression but rather encourage chapter multimedia systems the interested reader to consult the bibliographical notes at the end of this chapter. . requirements of multimedia kernels as a result of the characteristics described in section . . multimedia applications often require levels of service from the operating system that differ from the requirements of traditional applications such as word processors compilers and spreadsheets. timing and rate requirements are perhaps the issues of foremost concern as the playback of audio and video data demands that the data be delivered within a certain deadline and at a continuous fixed rate. traditional applications typically do not have such time and rate constraints. tasks that request data at constant intervals or periods are known as periodic processes. for example an mpeg video might require a rate of frames per second during playback. maintaining this rate requires that a frame be delivered approximately every ' or . hundredths of a second. to put this in the context of deadlines let's assume that frame fj succeeds frame f in the video playback and that frame f was displayed at time to. the deadline for displaying frame fj is . hundredths of a second after time to. if the operating system is unable to display the frame by this deadline the frame will be omitted from the stream. as mentioned earlier rate requirements and deadlines are known as quality of service qos requirements. there are three qos levels . best effort service. the system makes a best effort attempt to satisfy the requirements however no guarantees are made. . soft qos. this level treats different types of traffic in different ways giving certain traffic streams higher priority than other streams. however just as with best effort service no guarantees are made. . hard qos. the quality of service requirements are guaranteed. traditional operating systems the systems we have discussed in this text so far typically provide only best effort service and rely on overprovisioning that is they simply assume that the total amount of resources available will tend to be larger than a worst case workload would demand. if demand exceeds resource capacity manual intervention must take place and a process or several processes must be removed from the system. however next generation multimedia systems cannot make such assumptions. these systems must provide continuous media applications with the guarantees made possible by hard qos. therefore in the remainder of this discussion when we refer to qos we mean hard qos. next we explore various techniques that enable multimedia systems to provide such service level guarantees. there are a number of parameters defining qos for multimedia applications including the following throughput. throughput is the total amount of work done during a certain interval. for multimedia applications throughput is the required data rate. . requirements of multimedia kernels delay. delay refers to the elapsed time from when a request is first submitted to when the desired result is produced. for example the time from when a client requests a media stream to when the stream is delivered is the delay. jitter. jitter is related to delay but whereas delay refers to the time a client must wait to receive a stream jitter refers to delays that occur during playback of the stream. certain multimedia applications such as on demand real time streaming can tolerate this sort of delay. jitter is generally considered unacceptable for continuous media applications however because it may mean long pauses or lost frames during playback. clients can often compensate for jitter by buffering a certain amount of data say seconds' worth before beginning playback. reliability. reliability refers to how errors are handled during transmission and processing of continuous media. errors may occur due to lost packets in the network or processing delays by the cpu. in these and other scenarios errors cannot be corrected since packets typically arrive too late to be useful. the quality of service may be negotiated between the client and the server. for example continuous media data may be compressed at different levels of quality the higher the quality the higher the required data rate. a client may negotiate a specific data rate with a server thus agreeing to a certain level of quality during playback. furthermore many media players allow the client to configure the player according to the speed of the client's connection to the network. this allows a client to receive a streaming service at a data rate specific to a particular connection. thus the client is negotiating quality of service with the content provider. to provide qos guarantees operating systems often use admission control which is simply the practice of admitting a reqtiest for service only if the server has sufficient resources to satisfy the request. we see admission control quite often in our everyday lives. for example a movie theater only admits as many customers as it has seats in the theater. there are also many situations in everyday life where admission control is not practiced but would be desirable! if no admission control policy is used in a multimedia environment the demands on the system might become so great that the system becomes unable to meet its qos guarantees. in chapter we discussed using semaphores as a method of implementing a simple admission control policy. in this scenario there exist a finite number of non shareable resources. when a resource is requested we will only grant the request if there are sufficient resources available otherwise the requesting process is forced to wait until a resource becomes available. semaphores may be used to implement an admission control policy by first initializing a semaphore to the number of resources available. every request for a resource is made through a waito operation on the semaphore a resource is released with an invocation of signal on the semaphore. once all resources are in use subsequent calls to wait block until there is a corresponding s i g n a l . a common technique for implementing admission control is to use resource reservations. for example resources on a file server may include the cpu memory file system devices and network figure . . note that chapter multimedia systems y. j storage j i o bus chh jtahz secondary ct j storage v i o bus butfer space network figure . resources on a file server. resources may be either exclusive or shared and that there may be either single or multiple instances of each resource type. to use a resource a client must make a reservation request for the resource in advance. if the request cannot be granted the reservation is denied. an admission control scheme assigns a resource manager to each type of resource. requests for resources have associated qos requirements for example required data rates. when a request for a resource arrives the resource manager determines if the resource can meet the qos demands of the request. if not the request may be rejected or a lower level of qos may be negotiated between the client and the server. if the request is accepted the resource manager reserves the resources for the requesting client thus assuring the client the desired qos requirements. in section . . we examine the admission control algorithm used to ensure qos guarantees in the cineblitz multimedia storage server